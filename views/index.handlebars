<h1>Eat-Da-Burger</h1>

<div class="input-div">
    <form action="/add" method="POST">
        <input type="text" name="burger_name" maxlength="50" placeholder="Enter burger name">
        <button type="submit">Add</button>
    </form>
</div>

<div class="burger-lists">
    <div class="to-eat">
        <h2>To eat...</h2>
            <ul>
            {{#each burgers}}
                {{#unless this.devoured}}
                    <li>
                        {{this.burger_name}}
                        <form action="/devour/{{this.id}}" method="POST">
                            <button type="submit" name="devoured" value="1">Devour</button>
                        </form>
                    </li>
                {{/unless}}
            {{/each}}
            </ul>
    </div>
    <div class="eaten">
        <h2>Eaten...</h2>
            <ul>
                {{#each burgers}}
                    {{#if this.devoured}}
                        <li>
                            {{this.burger_name}}
                            <button class="delete-btn" data-id="{{this.id}}" type="submit">Delete</button>
                        </li>
                    {{/if}}
                {{/each}}
            </ul>
    </div>
</div>

<!-- Delete request -->
<script type="text/javascript">
    const deleteBtns = document.querySelectorAll(".delete-btn");
    deleteBtns.forEach((button) => {
        button.addEventListener("click", (event) => {
            const id = event.target.getAttribute("data-id");

            fetch(`/devour/${id}`, {
                method: 'DELETE',
            }).then((res) => {
                location.reload();
            });
        });
    });
</script>