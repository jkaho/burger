<div class="heading">
    <img id="heading-img" src="assets/images/heading.png">
</div>

<div class="bg">

<main>
    <div class="input-div">
        <h2>What kind of burger would you like?</h2>
        <form action="/add" method="POST">
            <input type="text" name="burger_name" maxlength="50" placeholder="Enter burger name">
            <button type="submit"><i class="fas fa-plus"></i></button>
        </form>
    </div>

    <div class="burger-lists">
        <div class="to-eat">
            <h2>To eat...</h2>
                <ul>
                {{#each burgers}}
                    {{#unless this.devoured}}
                        <li>
                            <p>{{this.burger_name}}</p>
                            <form action="/devour/{{this.id}}" method="POST">
                                <button type="submit" name="devoured" value="1"><i class="fas fa-utensils fa-2x"></i></button>
                            </form>
                        </li>
                    {{/unless}}
                {{/each}}
                </ul>
        </div>
        <div class="eaten">
            <h2>Eaten...</h2>
                <ul>
                    {{#each burgers}}
                        {{#if this.devoured}}
                            <li>
                                <p>{{this.burger_name}}</p>
                                <button class="delete-btn" data-id="{{this.id}}" type="submit"><i data-id="{{this.id}}" class="fas fa-poop fa-2x"></i></button>
                            </li>
                        {{/if}}
                    {{/each}}
                </ul>
        </div>
    </div>
</main>
</div>

<!-- Delete request -->
<script type="text/javascript">
    const deleteBtns = document.querySelectorAll(".delete-btn");
    deleteBtns.forEach((button) => {
        button.addEventListener("click", (event) => {
            const id = event.target.getAttribute("data-id");
            
            fetch(`/devour/${id}`, {
                method: 'DELETE',
            }).then((res) => {
                location.reload();
            });
        });
    });
</script>